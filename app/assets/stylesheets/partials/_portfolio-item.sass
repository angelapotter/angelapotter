$sample-img-props: ( image-width: 900px, gutter: 40px )
$sample-width: map-get( $sample-img-props, image-width ) + map-get( $sample-img-props, gutter )

.portfolio-item__samples-container
  position: relative

  .arrow-prev,
  .arrow-next
    $size: 1.8em
    $background: map-get( $grays, dark )
    $color: white
    position: absolute
    top: 45%
    z-index: 1
    +circle( $size, black )
    margin-top: $size * -1 / 2
    font-size: em( 35px )
    text-align: center
    line-height: 1.9
    color: $color
    cursor: pointer
    opacity: 0.2
    +transition( opacity map-get( $transitions, md ) )

  .arrow-prev
    left: map-get( $nav-link-props, padding-x )

  .arrow-next
    right: map-get( $nav-link-props, padding-x )

  &:hover
    .arrow-prev,
    .arrow-next
      opacity: 0.6

$dot-props: ( color: map-get( $grays, dark ), size: em( 15px ), gutter: em( 20px ) )

.portfolio-item__match-width--image
  width: map-get( $sample-img-props, image-width )
  max-width: 100%

.dot-navigation
  text-align: center
  margin-top: -1em

.dot-navigation__dots
  position: relative
  display: inline-block

.dot-navigation__dot-container
  padding: map-get( $dot-props, gutter ) / 2
  display: inline-block
  cursor: pointer

  &:hover,
  &.active
    .dot-navigation__dot
      background: map-get( $dot-props, color )

.dot-navigation__dot
  +circle( map-get( $dot-props, size ), transparent )
  border: 2px solid map-get( $dot-props, color )

.dot-navigation__dot-fill
  position: absolute
  top: map-get( $dot-props, gutter ) / 2
  left: map-get( $dot-props, gutter ) / 2
  +circle( map-get( $dot-props, size ), map-get( $dot-props, color ) )
  +transition( left map-get( $transitions, md ) )

.portfolio-item__samples
  width: 100%
  position: relative
  white-space: nowrap
  +transition( left map-get( $transitions, md ) )

.portfolio-item__sample
  display: inline-block
  vertical-align: top
  width: $sample-width
  max-width: 100%
  padding-right: 40px

+mq( $sample-width + 40px )
  .portfolio-item__samples-container
    overflow: hidden

    .arrow-prev
      left: 0
    .arrow-next
      right: 0

  .portfolio-item__sample
    padding-right: 0

+mq( 800px )
  .container--portfolio-samples
    padding-left: 1%
    padding-right: 1%

+set-aspect-ratio( '.sample__image', ( 605px / map-get( $sample-img-props, image-width ) ) )
  display: block
  width: 100%
  height: 100%

.sample__image-overlay
  position: absolute
  left: 0
  right: 0
  top: 0
  bottom: 0
  +linear-gradient( $stop: transparentize( white, 0.2 ), $from: 95% )

.portfolio-item__caption
  display: table
  width: 100%
  max-width: 50em
  min-height: em( 116px )
  padding: 2% 5%
  margin: 1em auto 0
  position: relative
  z-index: 1
  background: transparentize( map-get( $grays, pinkish-light ), 0.2 )
  border: 1px solid darken( map-get( $grays, pinkish-light ), 2% )
  white-space: normal
  +box-shadow( 1px, 4px, 2px, transparentize( black, 0.9 ) )
  color: map-get( $grays, darkest )

  p
    display: table-cell
    vertical-align: middle

.portfolio-item__heading
  padding: 3em 0 0

.portfolio-item__title
  display: inline-block
  color: map-get( $grays, darkest )

.portfolio-item__subtitle
  float: right
  font-size: em( 20px )
  color: map-get( $grays, medium )

.portfolio-item__description
  margin: 2em 0

.portfolio-item__links
  $bp-md: 680px
  +thrree-cols-fixed-middle( $col-mid-width: 14em )
  margin-top: 40px
  text-align: center

  .col-left
    text-align: left

  .col-right
    text-align: right

  +mq( $bp-md )
    .link--hidden-md
      display: none

    .col-left,
    .col-right
      width: percentage( 1 / 2 )

  +mq( 420px )
    .link--hidden-sm
      display: none
